<!-- https://github.com/dls-controls/versiongit/blob/master/docs/_templates/layout.html -->
<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>pymagic9 &mdash; pymagic9 0.1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="PyMagic9 lib" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: rgb(7, 43, 93)" >

          
          
          <a href="../index.html" class="icon icon-home">
            pymagic9
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  <style>
    /* style mobile top nav to look like main nav */
    .wy-nav-top {
        background: rgb(7, 43, 93)
    }
  </style>
  
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">PyMagic9 lib</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">pymagic9</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9.getframe"><code class="docutils literal notranslate"><span class="pre">getframe()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9._getframe"><code class="docutils literal notranslate"><span class="pre">_getframe()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9._get_argval"><code class="docutils literal notranslate"><span class="pre">_get_argval()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9._get_last_name"><code class="docutils literal notranslate"><span class="pre">_get_last_name()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9._unpack_opargs"><code class="docutils literal notranslate"><span class="pre">_unpack_opargs()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9.isfunctionincallchain"><code class="docutils literal notranslate"><span class="pre">isfunctionincallchain()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#pymagic9.pymagic9.nameof"><code class="docutils literal notranslate"><span class="pre">nameof()</span></code></a></li>
</ul>
</li>
</ul>

  <!-- Add versions for selected branches + tags -->
  <p class="caption"><span class="caption-text">Versions</span></p>
  <ul id="versions"/>
  <script>
    // Add any branches to appear in the side pane here, tags will be added below
    // Will only appear if docs are built and pushed in gh-pages
    var versions = ['master', 'main'];
    var dirs = new Set();
    function addVersion(name) {
      if (dirs.has(name)) {
        var li = document.createElement("li");
        var a = document.createElement("a");
        a.href = 'https://sammnnz.github.io/pymagic9/' + name;
        a.innerText = name;
        li.appendChild(a)
        document.getElementById('versions').appendChild(li);
      }
    }
    Promise.all([
      // Find gh-pages directories and populate `dirs`
      fetch("https://api.github.com/repos/sammnnz/pymagic9/contents?ref=gh-pages")
      .then(response => response.json())
      .then(data => data.forEach(function(e) {
        if (e.type == "dir") dirs.add(e.name);
      })),
      // Add tags to `versions`
      fetch('https://api.github.com/repos/sammnnz/pymagic9/tags')
        .then(response => response.json())
        .then(data => data.forEach(function(e) {
          versions.push(e.name);
        }))
      ]).then(_ => versions.forEach(addVersion))
  </script>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: rgb(7, 43, 93)" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pymagic9</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">PyMagic9 lib</a></li>
      <li class="breadcrumb-item active">pymagic9</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api-docs/pymagic9.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-pymagic9.pymagic9">
<span id="pymagic9"></span><h1>pymagic9<a class="headerlink" href="#module-pymagic9.pymagic9" title="Permalink to this heading">¶</a></h1>
<p>This module provides functions for analyzing call stacks such as <cite>nameof</cite>, <cite>isfunctionincallchain</cite>, etc.</p>
<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9.getframe">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">getframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">__depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9.getframe" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference external" href="https://docs.python.org/3/library/sys.html?highlight=_getframe#sys._getframe">sys._getframe</a> function is
used here if it exists in the version of python being used. Otherwise, the <a class="reference internal" href="#private-getframe"><span class="std std-ref">_getframe</span></a>
polyfill is used.</p>
</dd></dl>

<span class="target" id="private-getframe"></span><dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9._getframe">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">_getframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">__depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9._getframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Polyfill for the built-in sys._getframe function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>__depth</strong> (<em>int</em><em>, </em><em>optional</em>) – The depth of the call stack to traverse. A value of 0 represents the current frame,
1 represents the caller’s frame, and so on.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The frame object at the specified depth in the call stack, or None if the depth is out of
range.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>FrameType or None</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – If the depth argument is not an integer.</p></li>
<li><p><strong>ValueError</strong> – If call stack is not deep enough.</p></li>
</ul>
</dd>
</dl>
<p>This function provides a polyfill for the built-in <cite>sys._getframe</cite> function, which is used to access the call stack
frames. It allows you to retrieve the frame object at a specific depth in the call stack.</p>
<p>The depth argument specifies the number of frames to traverse. A value of 0 or less 0 represents the current frame,
1 represents the caller’s frame, and so on. If the depth is negative, it will traverse the frames in the opposite
direction.</p>
<p>If the specified depth is out of range (i.e., greater than the number of frames in the call stack), the function
raises ValueEror.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">frame</span> <span class="o">=</span> <span class="n">_getframe</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span><span class="p">)</span>  <span class="c1"># Output: bar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">foo</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bar</span><span class="p">()</span>
<span class="go">bar</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9._get_argval">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">_get_argval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">op</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">varnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constants</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cells</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9._get_argval" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the argument value based on the opcode and argument. Based on <em>dis._get_instructions_bytes</em> function (see
<a class="reference external" href="https://docs.python.org/3.9/library/dis.html#dis.get_instructions">dis.get_instructions</a>).</p>
<p>This function is used internally by the <cite>pymagic9</cite> module to retrieve the value of an argument based on the opcode
and argument index. It takes the offset, opcode, and argument as input and returns the corresponding value.</p>
<p>The <cite>varnames</cite>, <cite>names</cite>, <cite>constants</cite>, and <cite>cells</cite> arguments are optional and provide additional context for
resolving the argument value.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9._get_last_name">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">_get_last_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_code</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9._get_last_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name that matches the last argument in the given bytecode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>code</strong> (<em>bytes</em>) – The bytecode of the code object.</p></li>
<li><p><strong>f_code</strong> (<em>CodeType</em>) – The code object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The name that matches the last argument, or None if no match is found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str or None</p>
</dd>
</dl>
<p>This function is used internally by the <cite>pymagic9</cite> module to retrieve the name that corresponds to the last
argument in a given code object. It takes the bytecode and the code object.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9._unpack_opargs">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">_unpack_opargs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">code</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9._unpack_opargs" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpacks the opcodes and their arguments from the given bytecode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>code</strong> (<em>bytes</em><em> or </em><em>bytearray</em>) – The bytecode to unpack.</p>
</dd>
<dt class="field-even">Yields<span class="colon">:</span></dt>
<dd class="field-even"><p><em>tuple</em> – A tuple containing the offset, opcode, and argument of each opcode.</p>
</dd>
</dl>
<p>This function is a clone of the <cite>dis._unpack_opargs</cite> function from the Python 3.9.6 standard library’s <cite>dis</cite>
module. This is done to support early versions of python. It takes a bytecode object as input and yields a sequence
of tuples containing the offset, opcode, and argument of each opcode in the bytecode.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9.isfunctionincallchain">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">isfunctionincallchain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">__depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9.isfunctionincallchain" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines whether the given function object or code object is present in the call chain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<em>FunctionType</em><em> or </em><em>CodeType</em>) – The function object or code object to check.</p></li>
<li><p><strong>__depth</strong> (<em>int</em><em>, </em><em>optional</em>) – The depth of the call chain to search. Default is -1, which means search the entire
call chain.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the function or code object is found in the call chain, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>TypeError</strong> – If the input object is not a function or code object.</p>
</dd>
</dl>
<p>This function checks if the given function object or code object is present in the call chain of the current
execution. The call chain is the sequence of function calls that led to the current point of execution.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful when debugging in PyCharm - there may be incorrect behavior when a function that is being debugged
(a function that has breakpoints) is passed as an argument.</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">isfunctionincallchain</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">bar</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">isfunctionincallchain</span><span class="p">(</span><span class="n">foo</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">baz</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">foo</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">foo</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">bar</span><span class="p">())</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">baz</span><span class="p">())</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pymagic9.pymagic9.nameof">
<span class="sig-prename descclassname"><span class="pre">pymagic9.pymagic9.</span></span><span class="sig-name descname"><span class="pre">nameof</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pymagic9.pymagic9.nameof" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the name of an object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>o</strong> (<em>object</em>) – The object for which to retrieve the name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The name of the object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p>This function correctly determines the ‘name’ of an object, without being tied to the object itself.
It can be used to retrieve the name of variables, functions, classes, modules, and more.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">var1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">var2</span> <span class="o">=</span> <span class="n">var1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">var1</span><span class="p">))</span>
<span class="go">var1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nameof</span><span class="p">(</span><span class="n">var2</span><span class="p">))</span>
<span class="go">var2</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="PyMagic9 lib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Sam Nazarov.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>